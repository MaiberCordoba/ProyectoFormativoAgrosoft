---
title: Afecciones
description: Endpoint para gestionar las afecciones dentro del sistema AgroSoft.
---

import ApiBaseBanner from "../../../componets/ApiEndpoint.astro";

### Descripci√≥n

Este endpoint permite la gesti√≥n de afecciones en los cultivos, incluyendo su creaci√≥n, consulta, actualizaci√≥n.  
Cada afecci√≥n est√° asociada a una plantaci√≥n y una plaga, y contiene informaci√≥n clave como fecha de detecci√≥n y estado.

## M√©todos

### üîπ M√©todo GET

<ApiBaseBanner 
  method="GET" 
  path="/afecciones/" 
  baseUrl="http://127.0.0.1:8000"
/> 
Este m√©todo devuelve la lista de todas las afecciones registradas.  

###### ‚úÖ **Respuesta exitosa (200)**
```json
[
  {
    "id": 1,
    "fk_Plantacion": 5,
    "fk_Plaga": 2,
    "fechaEncuentro": "2025-03-27",
    "estado": "ST"
  }
]
```
###### ‚ùå Respuesta Error (500 - Internal Server Error)

### üîπ M√©todo POST

<ApiBaseBanner 
  method="POST" 
  path="/afecciones/" 
  baseUrl="http://127.0.0.1:8000"
/>
Este m√©todo permite registrar una nueva afecci√≥n.

### **Par√°metros del Request** 

| Par√°metro        | Tipo     | Requerido | Descripci√≥n                                         | Ejemplo         |
|-----------------|----------|-----------|-----------------------------------------------------|----------------|
| `fk_Plantacion` | integer  | S√≠        | ID de la plantaci√≥n afectada                        | 5              |
| `fk_Plaga`      | integer  | S√≠        | ID de la plaga encontrada                          | 2              |
| `fechaEncuentro`| string   | S√≠        | Fecha de detecci√≥n de la afecci√≥n (YYYY-MM-DD)      | "2025-03-27"   |
| `estado`        | string   | S√≠        | Estado de la afecci√≥n (`ST`, `EC`, `EL`)           | "ST"           |

---

### **Campos Requeridos**
```json
{
  "fk_Plantacion": 5,
  "fk_Plaga": 2,
  "fechaEncuentro": "2025-03-27",
  "estado": "ST"
}
```

###### ‚úÖ Respuesta Exitosa (201 - Created)
```json
{
  "id": 2,
  "fk_Plantacion": 6,
  "fk_Plaga": 3,
  "fechaEncuentro": "2025-03-28",
  "estado": "EC"
}
```
###### ‚ùå Respuesta Error (500 - Internal Server Error)

### üîπ M√©todo PATCH

<ApiBaseBanner 
  method="PATCH" 
  path="/afecciones/{id}/" 
  baseUrl="http://127.0.0.1:8000"
/>

Este m√©todo permite actualizar/editar una afecci√≥n.

### **Par√°metros del Request**
| Par√°metro        | Tipo     | Requerido | Descripci√≥n                                    | Ejemplo         |
|-----------------|----------|-----------|------------------------------------------------|----------------|
| `fk_Plantacion` | integer  | No        | Nuevo ID de la plantaci√≥n afectada            | 5              |
| `fk_Plaga`      | integer  | No        | Nuevo ID de la plaga encontrada               | 2              |
| `fechaEncuentro`| string   | No        | Nueva fecha de detecci√≥n (YYYY-MM-DD)         | "2025-03-27"   |
| `estado`        | string   | No        | Nuevo estado de la afecci√≥n (`ST`, `EC`, `EL`)| "EL"           |

###### ‚úÖ Respuesta Exitosa (200 - Ok)
```json
{
  "id": 1,
  "fk_Plantacion": 5,
  "fk_Plaga": 2,
  "fechaEncuentro": "2025-03-27",
  "estado": "EL"
}
```
###### üîç Respuesta ID No encontrado (404 - Not Found)
###### ‚ùå Respuesta Error (500 - Internal Server Error)


```

